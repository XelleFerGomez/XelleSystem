<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dashboard XELLE</title>
    <link rel="stylesheet" href="system-styles.css">
    <script src="system-app.js"></script>
</head>
<body onload="initDashboard()">

    <aside class="sidebar">
        <div class="sidebar-header">
            <h3>XELLE SYSTEM</h3>
        </div>
        
        <div class="sidebar-content">
            
            <div id="panel-filtros" class="hidden">
                <div class="nav-category" style="margin-top:0;">FILTRAR DOCS</div>
                
                <select id="ft" class="filter-select" onchange="loadDocumentos()">
                    <option value="TODOS">Tipo: Todos</option>
                    <option value="PR">Procedimiento (PR)</option>
                    <option value="PO">Pol√≠ticas (PO)</option>
                    <option value="IT">Instrucci√≥n de Trabajo (IT)</option>
                    <option value="IE">Instructivo de uso de equipos (IE)</option>
                    <option value="FO">Formato (FO)</option>
                    <option value="MC">Manual SGC (MC)</option>
                    <option value="MR">Matriz de riesgo (MR)</option>
                    <option value="OD">Otros documentos (OD)</option>
                </select>

                <select id="fa" class="filter-select" onchange="loadDocumentos()">
                    <option value="TODAS">√Årea: Todas</option>
                    <option value="DG">Direcci√≥n General (DG)</option>
                    <option value="CM">Comercial (CM)</option>
                    <option value="RS">Regulaci√≥n Sanitaria (RS)</option>
                    <option value="AC">Administraci√≥n y Compras (AC)</option>
                    <option value="LC">Laboratorio y Calidad (LC)</option>
                    <option value="OP">Operaciones (OP)</option>
                    <option value="VE">Ventas (VE)</option>
                    <option value="CO">Contabilidad (CO)</option>
                    <option value="FI">Finanzas (FI)</option>
                </select>
            </div>

            <div class="nav-category">NAVEGACI√ìN</div>

            <div id="nav-banco" class="hidden">
                <button class="nav-btn active" onclick="switchTab('RES', this)">üìä Resumen</button>
                <button class="nav-btn" onclick="switchTab(17, this)">üß¨ Recepci√≥n (FO-17)</button>
                <button class="nav-btn" onclick="switchTab(18, this)">üìã Evaluaci√≥n (FO-18)</button>
                <button class="nav-btn" onclick="switchTab(20, this)">üß™ Proceso (FO-20)</button>
                <button class="nav-btn" onclick="switchTab(21, this)">üìî Bit√°cora (FO-21)</button>
                <button class="nav-btn" onclick="switchTab(22, this)">üíâ Dosificaci√≥n (FO-22)</button>
                <button class="nav-btn" onclick="switchTab('TRZ', this)">üîç Trazabilidad</button>
            </div>

            <div id="nav-calidad" class="hidden">
                <button class="nav-btn active" onclick="switchTab('DOC', this)">üìÇ Documentaci√≥n</button>
                <button class="nav-btn" onclick="switchTab(19, this)">‚úÖ Lib. Lote (FO-19)</button>
                <button class="nav-btn" onclick="switchTab(31, this)">üß´ Micro Muestras (FO-31)</button>
                <button class="nav-btn" onclick="switchTab(32, this)">‚ùÑÔ∏è Liof. Placenta (FO-32)</button>
                <button class="nav-btn" onclick="switchTab(33, this)">üíß Liof. MC (FO-33)</button>
                <button class="nav-btn" onclick="switchTab(34, this)">üî¨ Lib. Flasks (FO-34)</button>
                <button class="nav-btn" onclick="switchTab(35, this)">üöö Embalaje (FO-35)</button>
                <button class="nav-btn" onclick="switchTab('TRZ', this)">üîç Trazabilidad</button>
            </div>

            <div id="nav-almacen" class="hidden">
                <button class="nav-btn active" onclick="switchTab('INV', this)">üì¶ Inventario</button>
                <button class="nav-btn" onclick="switchTab('DOC', this)">üìÑ Documentos</button>
            </div>

            <div id="nav-sgc" class="hidden">
                <button class="nav-btn active" onclick="switchTab('DOC', this)">üìö Biblioteca General</button>
            </div>
        </div>
    </aside>

    <div class="main-area">
        
        <div class="topbar">
            <div class="module-title" id="titulo-modulo">Cargando M√≥dulo...</div>
            <div style="display:flex; align-items:center; gap:15px;">
                <span id="u-name" style="color:#555; font-weight:bold;">Usuario</span>
                <a href="MenuPrincipal.html" style="text-decoration:none; font-size:20px; padding:5px; border-radius:50%; background:#f0f2f5;" title="Ir al Men√∫ Principal">üè†</a>
            </div>
        </div>

        <div class="workspace">
            <div class="card">
                
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; border-bottom:1px solid #eee; padding-bottom:15px;">
                    <h3 id="titulo-vista" style="margin:0; color:#2c3e50;">Vista General</h3>
                    
                    <div style="display:flex; gap:10px;">
                        <button id="btn-new" class="btn btn-green hidden" onclick="nuevoReg()">+ Nuevo Registro</button>
                        <button id="btn-up" class="btn btn-orange hidden" onclick="modalUp()">üì§ Subir Archivo</button>
                        <button id="btn-mov" class="btn btn-blue hidden" onclick="modalMov()">üì¶ Registrar Movimiento</button>
                    </div>
                </div>

                <div id="v-res" class="hidden">
                    <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:20px; margin-bottom:20px;">
                        <div style="background:#f8f9fa; padding:20px; text-align:center; border-radius:8px; border:1px solid #e9ecef;">
                            <div style="font-size:12px; color:#777;">VIALES TOTALES</div>
                            <b style="font-size:28px; color:#27ae60">1,250</b>
                        </div>
                        <div style="background:#f8f9fa; padding:20px; text-align:center; border-radius:8px; border:1px solid #e9ecef;">
                            <div style="font-size:12px; color:#777;">CULTIVOS ACTIVOS</div>
                            <b style="font-size:28px; color:#f39c12">14</b>
                        </div>
                        <div style="background:#f8f9fa; padding:20px; text-align:center; border-radius:8px; border:1px solid #e9ecef;">
                            <div style="font-size:12px; color:#777;">ALERTAS DE CALIDAD</div>
                            <b style="font-size:28px; color:#e74c3c">2</b>
                        </div>
                    </div>
                    <div style="padding:20px; background:#fff; border:1px solid #eee; border-radius:8px;">
                        <h4>Actividad Reciente</h4>
                        <p style="color:#777;">No hay actividad reciente registrada.</p>
                    </div>
                </div>

                <div id="v-tab" class="hidden">
                    <table class="dash-table" id="tbl-main">
                        <thead></thead>
                        <tbody>
                            <tr><td colspan="5" style="text-align:center; padding:30px; color:#999;">Selecciona una opci√≥n del men√∫</td></tr>
                        </tbody>
                    </table>
                </div>

                <div id="v-inv" class="hidden">
                    <input id="q-inv" placeholder="üîç Buscar insumo por nombre..." style="padding:12px; width:100%; border:1px solid #ccc; margin-bottom:15px; border-radius:6px;" onkeyup="loadInventario()">
                    <div style="overflow-x:auto;">
                        <table class="dash-table" id="tbl-inv">
                            <thead>
                                <tr><th>Producto</th><th>Presentaci√≥n</th><th>Lote</th><th>Caducidad</th><th>Stock</th><th>Acci√≥n</th></tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <div id="v-trz" class="hidden">
                    <div style="display:flex; gap:10px; margin-bottom:20px;">
                        <input id="q-trz" placeholder="üîç Escanear Lote o Folio..." style="padding:12px; flex:1; border:1px solid #ccc; border-radius:6px;">
                        <button class="btn btn-blue">Buscar</button>
                    </div>
                    <div id="r-trz" style="margin-top:20px; border:1px dashed #ccc; padding:40px; text-align:center; color:#999;">
                        Resultados de b√∫squeda aparecer√°n aqu√≠
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div id="m-sgc" class="hidden" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;justify-content:center;align-items:center;z-index:9999;">
        <div style="background:white;padding:30px;border-radius:8px;width:400px; box-shadow:0 5px 25px rgba(0,0,0,0.2);">
            <h3 style="margin-top:0;">Subir Documento</h3>
            
            <input id="up-cod" placeholder="C√≥digo (Ej: FO-LC-XX)" style="width:100%;margin-bottom:10px;padding:10px;box-sizing:border-box;">
            <input id="up-nom" placeholder="Nombre del Documento" style="width:100%;margin-bottom:10px;padding:10px;box-sizing:border-box;">
            
            <select id="up-tip" style="width:100%;margin-bottom:10px;padding:10px;">
                <option value="PR">Procedimiento (PR)</option>
                <option value="PO">Pol√≠ticas (PO)</option>
                <option value="IT">Instrucci√≥n de Trabajo (IT)</option>
                <option value="IE">Instructivo de uso de equipos (IE)</option>
                <option value="FO">Formato (FO)</option>
                <option value="MC">Manual SGC (MC)</option>
                <option value="MR">Matriz de riesgo (MR)</option>
                <option value="OD">Otros documentos (OD)</option>
            </select>
            
            <select id="up-are" style="width:100%;margin-bottom:10px;padding:10px;">
                <option value="DG">Direcci√≥n General (DG)</option>
                <option value="CM">Comercial (CM)</option>
                <option value="RS">Regulaci√≥n Sanitaria (RS)</option>
                <option value="AC">Administraci√≥n y Compras (AC)</option>
                <option value="LC">Laboratorio y Calidad (LC)</option>
                <option value="OP">Operaciones (OP)</option>
                <option value="VE">Ventas (VE)</option>
                <option value="CO">Contabilidad (CO)</option>
                <option value="FI">Finanzas (FI)</option>
            </select>
            
            <input type="file" id="up-fil" style="margin-bottom:20px;">
            
            <div style="text-align:right; display:flex; justify-content:flex-end; gap:10px;">
                <button class="btn btn-red" onclick="document.getElementById('m-sgc').classList.add('hidden')">Cancelar</button>
                <button class="btn btn-green" onclick="subirDoc()">Guardar</button>
            </div>
        </div>
    </div>

</body>
</html>